# ====================================
# Application Configuration
# ====================================
NODE_ENV=development
PORT=3000
HOST=0.0.0.0
LOG_LEVEL=info
INSTANCE_ID=${WEBSITE_INSTANCE_ID:-local}

# ====================================
# Session & Authentication
# ====================================
SESSION_SECRET=your-session-secret
JWT_SECRET=your-jwt-secret
JWT_ISSUER=OptimaCore
JWT_AUDIENCE=optima-client
JWT_ACCESS_TOKEN_EXPIRY=15m
JWT_REFRESH_TOKEN_EXPIRY=7d

# ====================================
# Redis Configuration
# ====================================
# Local Development
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0
REDIS_TLS=false

# Production (Azure Redis)
# REDIS_CONNECTION_STRING=rediss://:<password>@<name>.redis.cache.windows.net:6380?ssl=true

# ====================================
# Database Configuration
# ====================================
# Local Development
DB_HOST=localhost
DB_PORT=5432
DB_USER=postgres
DB_PASSWORD=postgres
DB_NAME=optimacore
DB_SSL=false

# Production (Azure Database for PostgreSQL)
# POSTGRES_CONNECTION_STRING=postgresql://<user>:<password>@<server>.postgres.database.azure.com:5432/<database>?sslmode=require

# ====================================
# Azure Services (Production)
# ====================================
# Azure App Service Settings (auto-injected by Azure)
WEBSITE_SITE_NAME=
WEBSITE_INSTANCE_ID=
WEBSITE_HOSTNAME=

# Azure Application Insights
APPLICATIONINSIGHTS_CONNECTION_STRING=
APPINSIGHTS_INSTRUMENTATIONKEY=

# Azure Key Vault
KEY_VAULT_NAME=
KEY_VAULT_URI=https://<keyvault-name>.vault.azure.net/

# Azure Cosmos DB
COSMOS_ENDPOINT=
COSMOS_KEY=
COSMOS_DATABASE=optimacore

# Azure Storage
AZURE_STORAGE_CONNECTION_STRING=
AZURE_STORAGE_CONTAINER=optimacore

# Azure Web PubSub
WEBPUBSUB_CONNECTION_STRING=
WEBPUBSUB_HUB=default

# ====================================
# CORS Configuration
# ====================================
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:8080
ALLOWED_METHODS=GET,POST,PUT,DELETE,OPTIONS
ALLOWED_HEADERS=Content-Type,Authorization,X-Requested-With,Origin,Accept

# ====================================
# Security Headers
# ====================================
CSP_DIRECTIVES=default-src 'self'; script-src 'self' 'unsafe-inline' 'unsafe-eval' https:; style-src 'self' 'unsafe-inline' https:; img-src 'self' data: https:; font-src 'self' https: data:;
ENABLE_HSTS=true
X_POWERED_BY=OptimaCore
X_CONTENT_TYPE_OPTIONS=nosniff
X_FRAME_OPTIONS=DENY
X_XSS_PROTECTION=1; mode=block
REFERRER_POLICY=strict-origin-when-cross-origin
PERMISSIONS_POLICY=geolocation=(), microphone=(), camera=()

# ====================================
# Feature Flags
# ====================================
ENABLE_METRICS=true
ENABLE_REQUEST_LOGGING=true
ENABLE_CACHE=true
ENABLE_AZURE_KEY_VAULT=false
ENABLE_ANALYTICS=false

# ====================================
# Rate Limiting
# ====================================
RATE_LIMIT_WINDOW_MS=900000  # 15 minutes
RATE_LIMIT_MAX_REQUESTS=100  # Max requests per window per IP

# ====================================
# Session Configuration
# ====================================
SESSION_COOKIE_NAME=optimacore.sid
SESSION_COOKIE_SECURE=false  # Set to true in production with HTTPS
SESSION_COOKIE_HTTPONLY=true
SESSION_COOKIE_SAMESITE=lax
SESSION_MAX_AGE=86400000  # 24 hours in milliseconds

# ====================================
# Local Development
# ====================================
# Local Key Paths (fallback if Key Vault is not available)
JWT_PRIVATE_KEY_PATH=./secrets/private.key
JWT_PUBLIC_KEY_PATH=./secrets/public.key

# ====================================
# Monitoring & Observability
# ====================================
# Application Insights
APP_INSIGHTS_CONNECTION_STRING=

# Sentry
SENTRY_DSN=

# ====================================
# Azure Cost Management
# ====================================
BUDGET_ALERT_EMAILS=admin@example.com
DEFAULT_BUDGET_AMOUNT=1000
DEFAULT_BUDGET_TIME_GRAIN=Monthly
